<Window x:Class="ThreeDMolecules.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:helix="http://helix-toolkit.org/wpf"
        xmlns:vm="clr-namespace:ThreeDMolecules.ViewModels"
        mc:Ignorable="d"
        Title="3DMolecules - 3D Molecular Visualization" Height="900" Width="1600">
    <Window.DataContext>
        <vm:SimulationViewModel />
    </Window.DataContext>
    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="*" />
            <ColumnDefinition Width="320" />
        </Grid.ColumnDefinitions>
        <helix:HelixViewport3D x:Name="helixViewport" Grid.Column="0">
            <helix:HelixViewport3D.Camera>
                <PerspectiveCamera Position="0, -30, 10" LookDirection="0,30,-10" UpDirection="0,0,1" FieldOfView="45"/>
            </helix:HelixViewport3D.Camera>
            <ModelVisual3D>
                <ModelVisual3D.Content>
                    <Model3DGroup>
                        <AmbientLight Color="Gray" />
                        <AmbientLight Color="#404040" />
                        <DirectionalLight Color="White" Direction="1,-1,-1" />
                        <DirectionalLight Color="White" Direction="-1,1,1" />
                        <DirectionalLight Color="White" Direction="0,-1,0" />
                    </Model3DGroup>
                </ModelVisual3D.Content>
            </ModelVisual3D>
            <!-- Molecules then boundary (transparent last) -->
            <ModelVisual3D Content="{Binding MoleculesRoot}" />
            <ModelVisual3D Content="{Binding BoundaryRoot}" />
        </helix:HelixViewport3D>
        <ScrollViewer Grid.Column="1" Margin="8" VerticalScrollBarVisibility="Auto">
            <StackPanel Orientation="Vertical" >
                <TextBlock Text="Simulation Controls" FontWeight="Bold" FontSize="16" />
                <StackPanel Orientation="Horizontal" Margin="0,10,0,0">
                    <Button Command="{Binding StartCommand}" Content="Start" Width="70" Margin="0,0,6,0" />
                    <Button Command="{Binding PauseCommand}" Content="Pause" Width="70" Margin="0,0,6,0" />
                    <Button Command="{Binding ResetCommand}" Content="Reset" Width="70" />
                </StackPanel>
                <TextBlock Text="Status" FontWeight="Bold" Margin="0,16,0,4" />
                <TextBlock Text="{Binding Fps, StringFormat=FPS: {0:F1}}" />
                <TextBlock Text="{Binding IsRunning, StringFormat=Running: {0}}" />
                <TextBlock Text="{Binding Molecules.Count, StringFormat=Molecules: {0}}" />

                <TextBlock Text="Molecule Count" FontWeight="Bold" Margin="0,16,0,4" />
                <StackPanel Margin="0,4,0,0">
                    <Slider Minimum="0" Maximum="240" Value="{Binding MoleculeCount, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" TickFrequency="20" IsSnapToTickEnabled="False"/>
                    <TextBlock Text="{Binding MoleculeCount, StringFormat=Current: {0}}" />
                </StackPanel>
            </StackPanel>
        </ScrollViewer>
    </Grid>
</Window>
